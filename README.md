# Профориентационный Телеграм-бот ПВГУС

Этот бот помогает абитуриентам определиться с выбором программы обучения в Поволжском государственном университете сервиса (ПВГУС), задавая вопросы о их интересах и предпочтениях.

## Особенности бота

- Интерактивное общение с пользователем для выявления интересов и предпочтений
- Рекомендации подходящих программ обучения в ПВГУС
- Автоматическая очистка неактивных чатов
- Обработка сбоев и повторные попытки при ошибках API

## Требования

- Python 3.7+
- Telegram Bot API токен
- OpenRouter API ключ
- Доступ к Интернету

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/SergLipatov/tolgas_proforintation_bot.git
cd tolgas_proforintation_bot
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

Необходимые пакеты:

```
APScheduler==3.6.3
cachetools==4.2.2
certifi==2025.4.26
charset-normalizer==3.4.2
idna==3.10
python-dotenv==1.0.0
python-telegram-bot==13.15
pytz==2025.2
requests==2.28.2
six==1.17.0
tornado==6.1
tzdata==2025.2
tzlocal==5.3.1
urllib3==1.26.20
```

### 3. Получение Telegram Bot API токена

1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. Сохраните полученный токен API

### 4. Получение OpenRouter API ключа

1. Зарегистрируйтесь на [OpenRouter](https://openrouter.ai/)
2. В личном кабинете создайте API ключ
3. Скопируйте ключ для дальнейшего использования

### 5. Настройка конфигурации

1. Создайте файл `.env` в корневой директории проекта:

```
TELEGRAM_BOT_TOKEN=ваш_телеграм_токен
OPENROUTER_API_KEY=ваш_openrouter_ключ
OPENROUTER_MODEL=deepseek-ai/deepseek-coder-33b-instruct
```

2. В директории `data` находится файл `system_prompt.txt` с системным промптом для профориентации. 

### 6. Запуск бота

```bash
python bot.py
```

## Структура проекта

```
pvgus-career-bot/
│
├── bot.py                # Основной файл бота
├── data/                 # Директория данных
│   └── system_prompt.txt # Системный промпт для LLM
├── .env                  # Файл с переменными окружения
├── requirements.txt      # Зависимости проекта
└── README.md             # Документация
```

## Команды бота

- `/start` - Начать новую беседу
- `/reset` - Сбросить историю беседы и начать заново
- `/help` - Показать справку по использованию бота

## Работа с моделями


Бот использует модель `deepseek-ai/deepseek-coder-33b-instruct` через OpenRouter API. Это можно изменить в файле `.env`, установив другую модель в переменной `OPENROUTER_MODEL`.

## Обработка ошибок

Бот имеет встроенный механизм повторных попыток для обработки следующих ошибок:
- Превышение лимита запросов (429)
- Ошибки сервера (5xx)
- Тайм-ауты и проблемы с соединением

## Управление историей чата

- История чата хранится в памяти для каждого пользователя
- Неактивные чаты автоматически удаляются через 24 часа
- Пользователи могут сбросить историю чата командой `/reset`

## Известные проблемы и ограничения

- Бот хранит историю чатов в оперативной памяти, поэтому при перезагрузке все истории будут потеряны
- Для продакшн-среды рекомендуется реализовать постоянное хранение данных в базе данных
- Большие контексты могут привести к ошибкам из-за ограничений модели

## Контакты для поддержки

При возникновении вопросов или проблем с ботом, обращайтесь:
- Email: 478997@mail.ru
- Telegram: @Serg2311
